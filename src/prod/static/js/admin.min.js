function admin_init(){psk=window.prompt("hey buddy. im gonna need to see some identification for you to proceed:");var t=new XMLHttpRequest;t.open("POST","http://hdhs.live/auth"),t.setRequestHeader("Accept","application/json"),t.setRequestHeader("Content-Type","application/json"),t.onreadystatechange=function(){t.readyState==XMLHttpRequest.DONE&&("true"==t.responseText?(admincontent=document.getElementById("admincontent"),admin_querydb("numreps")):window.location.replace("https://www.youtube.com/watch?v=vOtqPictUUQ&list=PLRfJd4ggmHhS_pBNUwayGWLVMZLUppgtH&index=21"))};var e={psk:String(psk)};t.send(JSON.stringify(e))}function admin_querydb(t){fetch("http://hdhs.live/fetch"+t).then(t=>t.json()).then(e=>{if(console.log(e),e)if(document.getElementById("maintable")&&document.getElementById("maintable").remove(),"new"==t||"old"==t||"pop"==t)for(admincontent.insertAdjacentHTML("beforeend",'<table border="1" id="maintable" style="width:700px;"><tr><th>id</th><th>user</th><th>content</th><th>comments</th><th>likes</th><th>stamp</th><th>deleted</th><th>delete</th><th>set_no_render</th></tr></table>'),i=0;i<e.length;i++)document.getElementById("maintable").insertAdjacentHTML("beforeend",'<tr id="'+e[i][0]+'"><th>'+e[i][0]+"</th><th>"+e[i][1]+"</th><th>"+e[i][2]+"</th><th>"+e[i][3]+"</th><th>"+e[i][4]+"</th><th>"+e[i][5]+"</th><th>"+e[i][6]+'</th><th><button type="button" onclick="moderate(\''+e[i][0]+"','post_no_rep','delete_norep')\">Delete</button></th><th><button type=\"button\" onclick=\"moderate('"+e[i][0]+"','post_no_rep','no_render_norep')\">set_no_render</button></th></tr>");else if("reports"==t)for(admincontent.insertAdjacentHTML("beforeend",'<table border="1" id="maintable" style="width:700px;"><tr><th>id</th><th>reason</th><th>content</th><th>type</th><th>content_id</th><th>delete</th><th>dismiss</th><th>set_no_render</th></tr></table>'),i=0;i<e.length;i++)document.getElementById("maintable").insertAdjacentHTML("beforeend",'<tr id="'+e[i][0]+'"><th>'+e[i][0]+"</th><th>"+e[i][1]+"</th><th>"+e[i][2]+"</th><th>"+e[i][3]+"</th><th>"+e[i][4]+'</th></th><th><button type="button" onclick="moderate(\''+e[i][0]+"','"+e[i][3]+"','delete')\">Delete</button></th><th><button type=\"button\" onclick=\"moderate('"+e[i][0]+"','"+e[i][3]+"','dismiss')\">Dismiss</button></th><th><button type=\"button\" onclick=\"moderate('"+e[i][0]+"','"+e[i][3]+"','no_render')\">set_no_render</button></th></tr>");else if("allcomments"==t)for(admincontent.innerHTML+='<table border="1" id="maintable" style="width:700px;"><tr><th>id</th><th>post</th><th>content</th><th>likes</th><th>stamp</th><th>user</th><th>deleted</th><th>delete</th><th>set_no_render</th></tr></table>',i=0;i<e.length;i++)document.getElementById("maintable").insertAdjacentHTML("beforeend",'<tr id="'+e[i][0]+'"><th>'+e[i][0]+"</th><th>"+e[i][1]+"</th><th>"+e[i][2]+"</th><th>"+e[i][3]+"</th><th>"+e[i][4]+"</th><th>"+e[i][5]+"</th></th><th>"+e[i][6]+'</th><th><button type="button" onclick="moderate(\''+e[i][0]+"','comment_no_rep','delete_norep')\">Delete</button></th><th><button type=\"button\" onclick=\"moderate('"+e[i][0]+"','comment_no_rep','no_render_norep')\">set_no_render</button></th></tr>");else"numreps"==t&&(document.getElementById("reportcnt").innerHTML='<h1 style="color:red;"><b>'+e+" Pending Reports Need Action</b></ht>")})}function moderate(t,e,n){console.log(t,e,n);var o=new XMLHttpRequest;o.open("POST","http://hdhs.live/moderate"),o.setRequestHeader("Accept","application/json"),o.setRequestHeader("Content-Type","application/json"),o.onreadystatechange=function(){o.readyState==XMLHttpRequest.DONE&&(document.getElementById(t).remove(),admin_querydb("numreps"))};var i={id:String(t),type:String(e),action:String(n)};o.send(JSON.stringify(i))}